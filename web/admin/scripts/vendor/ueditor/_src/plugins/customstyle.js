UE.plugins.customstyle=function(){var t=this;t.setOpt({customstyle:[{tag:"h1",name:"tc",style:"font-size:32px;font-weight:bold;border-bottom:#ccc 2px solid;padding:0 4px 0 0;text-align:center;margin:0 0 20px 0;"},{tag:"h1",name:"tl",style:"font-size:32px;font-weight:bold;border-bottom:#ccc 2px solid;padding:0 4px 0 0;text-align:left;margin:0 0 10px 0;"},{tag:"span",name:"im",style:"font-size:16px;font-style:italic;font-weight:bold;line-height:18px;"},{tag:"span",name:"hi",style:"font-size:16px;font-style:italic;font-weight:bold;color:rgb(51, 153, 204);line-height:18px;"}]}),t.commands.customstyle={execCommand:function(t,e){var o,l,i=this,n=e.tag,s=domUtils.findParent(i.selection.getStart(),function(t){return t.getAttribute("label")},!0),a={};for(var r in e)void 0!==e[r]&&(a[r]=e[r]);if(delete a.tag,s&&s.getAttribute("label")==e.label){if(o=this.selection.getRange(),l=o.createBookmark(),o.collapsed)if(dtd.$block[s.tagName]){var d=i.document.createElement("p");domUtils.moveChild(s,d),s.parentNode.insertBefore(d,s),domUtils.remove(s)}else domUtils.remove(s,!0);else{var m=domUtils.getCommonAncestor(l.start,l.end),c=domUtils.getElementsByTagName(m,n);new RegExp(n,"i").test(m.tagName)&&c.push(m);for(var g,f=0;g=c[f++];)if(g.getAttribute("label")==e.label){var u=domUtils.getPosition(g,l.start),p=domUtils.getPosition(g,l.end);if((u&domUtils.POSITION_FOLLOWING||u&domUtils.POSITION_CONTAINS)&&(p&domUtils.POSITION_PRECEDING||p&domUtils.POSITION_CONTAINS)&&dtd.$block[n]){var d=i.document.createElement("p");domUtils.moveChild(g,d),g.parentNode.insertBefore(d,g)}domUtils.remove(g,!0)}s=domUtils.findParent(m,function(t){return t.getAttribute("label")==e.label},!0),s&&domUtils.remove(s,!0)}o.moveToBookmark(l).select()}else if(dtd.$block[n]){if(this.execCommand("paragraph",n,a,"customstyle"),o=i.selection.getRange(),!o.collapsed){o.collapse(),s=domUtils.findParent(i.selection.getStart(),function(t){return t.getAttribute("label")==e.label},!0);var b=i.document.createElement("p");domUtils.insertAfter(s,b),domUtils.fillNode(i.document,b),o.setStart(b,0).setCursor()}}else{if(o=i.selection.getRange(),o.collapsed)return s=i.document.createElement(n),domUtils.setAttributes(s,a),void o.insertNode(s).setStart(s,0).setCursor();l=o.createBookmark(),o.applyInlineStyle(n,a).moveToBookmark(l).select()}},queryCommandValue:function(){var t=domUtils.filterNodeList(this.selection.getStartElementPath(),function(t){return t.getAttribute("label")});return t?t.getAttribute("label"):""}},t.addListener("keyup",function(e,o){var l=o.keyCode||o.which;if(32==l||13==l){var i=t.selection.getRange();if(i.collapsed){var n=domUtils.findParent(t.selection.getStart(),function(t){return t.getAttribute("label")},!0);if(n&&dtd.$block[n.tagName]&&domUtils.isEmptyNode(n)){var s=t.document.createElement("p");domUtils.insertAfter(n,s),domUtils.fillNode(t.document,s),domUtils.remove(n),i.setStart(s,0).setCursor()}}}})};