define(["app","jquery","ajax","storage","user.editor","user.detail"],function(e,t){e.factory("user",["$compile","ajax","storage",function(e,n,i){return{setUserEditor:function(n){t("#eevee-view").append(e(t("<div user.editor></div>"))(n))},setUserDetail:function(n){t("#eevee-view").append(e(t("<div user.detail></div>"))(n))},login:function(e,t,r){n.post("/api/auth/login",e).success(function(e){"function"==typeof t&&(i.set("APP_LOGIN_USER",JSON.stringify(e.data)),t(e))}).error(function(e){"function"==typeof r&&r(e)})},isLogin:function(){return i.has("APP_LOGIN_USER")},info:function(){return JSON.parse(i.get("APP_LOGIN_USER"))},logout:function(e){i.remove("APP_LOGIN_USER"),"function"==typeof e&&e()},getUsers:function(e){return n.get("/api/users",e)},postUser:function(e){return n.post("/api/user",e)},getUser:function(e){return n.get("/api/user",{user_id:e})}}}])});