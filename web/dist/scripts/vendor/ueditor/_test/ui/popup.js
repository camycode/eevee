module("ui.popup"),test("检查显示内容和隐藏方法：getContentHtmlTpl，show()，hide()，isHidden()",function(){var e=new baidu.editor.ui.Editor;stop(),setTimeout(function(){var t=new baidu.editor.ui.AutoTypeSetPicker({editor:e}),o=new te.obj[0].Popup({content:t,editor:e}),i=t.getHtmlTpl().replace(/##/g,t.id).replace(/%%/g,(t.uiName?"edui-"+t.uiName:"")+" "+t.className);equal(o.getContentHtmlTpl(),i,"检查popup的内容"),equal(o.getDom(),null,"popup初始不显示"),o.show(),equal(o.getDom().style.display,"","popup显示成功");var p=document.getElementById(o.id+"_content");equal(p.firstChild.id,t.id,"popup内容autoTypeSetPicker显示"),equal(o.isHidden(),!1,"isHidden==false"),o.hide(),equal(o.getDom().style.display,"none","popup隐藏成功"),equal(o.isHidden(),!0,"isHidden==true"),t.dispose(),o.dispose(),start()},50)}),test("定位显示popup；mousedown时隐藏popup",function(){var e=new baidu.editor.ui.Editor;e.render("editor"),e.ready(function(){var t=new baidu.editor.ui.AutoTypeSetPicker({editor:e}),o=new te.obj[0].Popup({content:t,editor:e}),i=baidu.editor.ui.uiUtils,p=20,d=100;o.showAt({left:p,top:d}),equal($(o.getDom()).css("top"),d+"px","popup位置：top"),equal($(o.getDom()).css("left"),p+"px","popup位置：left"),equal($(o.getDom()).css("width"),i.getClientRect(o.getDom("content")).width+"px","popup位置：width"),ok(i.getClientRect(o.getDom("content")).width>i.getClientRect(t.getDom()).width,"popup的width大于其内容的width"),equal($(o.getDom()).css("height"),i.getClientRect(o.getDom("content")).height+"px","popup位置：height"),ok(i.getClientRect(o.getDom("content")).height>i.getClientRect(t.getDom()).height,"popup的height大于其内容的height");var u=new te.obj[0].Popup({content:t,editor:e});u.show(),ua.mousedown(document.getElementById(o.id+"_content")),equal(o.isHidden(),!1,"在popup上mousedown，popup不隐藏"),equal(u.isHidden(),!0,"在popup上mousedown，popup2隐藏"),o.show(),u.show(),ua.mousedown(document.getElementById("editor")),equal(o.isHidden(),!0,"在其他位置mousedown，popup隐藏"),equal(u.isHidden(),!0,"在其他位置mousedown，popup隐藏"),o.show(),u.show(),t.dispose(),o.dispose(),u.dispose(),start()}),stop()});