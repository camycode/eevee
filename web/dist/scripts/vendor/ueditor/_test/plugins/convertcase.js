module("plugins.convertcase"),test("闭合选择",function(){stop(),setTimeout(function(){var e=te.obj[0],t=te.obj[1],l=e.body;e.setContent("<p>hello</p>"),setTimeout(function(){t.setStart(l.firstChild,1).collapse(!0).select(),e.execCommand("touppercase"),equal(e.getContent(),"<p>hello</p>","闭合选择--up"),start()},50)},100)}),test("非闭合选择----字符串全选",function(){var e=te.obj[0],t=te.obj[1],l=e.body;e.setContent("<p>hello1</p><p>hello2</p>"),setTimeout(function(){t.setStart(l.firstChild,0).setEnd(l.lastChild,1).select(),e.execCommand("touppercase"),equal(e.getContent(),"<p>HELLO1</p><p>HELLO2</p>","非闭合--字符串全选--up"),e.execCommand("touppercase"),equal(e.getContent(),"<p>HELLO1</p><p>HELLO2</p>","非闭合--两次up"),e.execCommand("tolowercase"),equal(e.getContent(),"<p>hello1</p><p>hello2</p>","非闭合--字符串全选--low"),e.execCommand("tolowercase"),equal(e.getContent(),"<p>hello1</p><p>hello2</p>","非闭合---两次low"),start()},50),stop()}),test("非闭合选择----子字符串",function(){var e=te.obj[0],t=te.obj[1],l=e.body;e.setContent("<p>hello1</p><p>hello2</p>"),setTimeout(function(){t.setStart(l.firstChild.firstChild,2).setEnd(l.lastChild.firstChild,2).select(),e.execCommand("touppercase"),equal(e.getContent(),"<p>heLLO1</p><p>HEllo2</p>","非闭合--子字符串--up"),e.execCommand("tolowercase"),equal(e.getContent(),"<p>hello1</p><p>hello2</p>","非闭合--子字符串--low"),start()},50),stop()}),test("非闭合选择----字符串包括大写跟小写",function(){var e=te.obj[0],t=te.obj[1],l=e.body,o="<p>HEllo1</p><p>heLLo2</p>";e.setContent(o),setTimeout(function(){t.setStart(l.firstChild.firstChild,0).setEnd(l.lastChild.firstChild,6).select(),e.execCommand("touppercase"),equal(e.getContent(),"<p>HELLO1</p><p>HELLO2</p>","非闭合--包含大小写--up"),e.setContent(o),setTimeout(function(){t.setStart(l.firstChild.firstChild,0).setEnd(l.lastChild.firstChild,6).select(),e.execCommand("tolowercase"),equal(e.getContent(),"<p>hello1</p><p>hello2</p>","非闭合--包含大小写--low"),start()},50)},50),stop()}),test("非闭合选择----字符串包括换行跟空格",function(){if(9!=ua.browser.ie&&8!=ua.browser.ie){var e=te.obj[0],t=te.obj[1],l=e.body;e.setContent("<p>HEllo1<br/> heLLO2</p>"),setTimeout(function(){t.setStart(l.firstChild.firstChild,0).setEnd(l.firstChild.lastChild,6).select(),e.execCommand("touppercase"),equal(e.getContent(),"<p>HELLO1<br/> HELLO2</p>","非闭合--包含大小写--up"),e.execCommand("tolowercase"),equal(e.getContent(),"<p>hello1<br/> hello2</p>","非闭合--包含大小写--low"),start()},50),stop()}}),test("标签table",function(){var e=te.obj[0],t=te.obj[1],l=e.body,o="<table><tr><td>hello1</td><td>hello2</td></tr><tr><td>hello3</td><td>hello4</td></tr></table>";e.setContent(o),stop(),setTimeout(function(){var o=l.firstChild.getElementsByTagName("td");t.selectNode(o[1]).select(),e.execCommand("touppercase"),equal(o[1].innerHTML,"HELLO2","table--up"),e.execCommand("tolowercase"),equal(o[1].innerHTML,"hello2","table--low"),t.setStart(o[1],0).setEnd(o[2],1).select(),e.execCommand("touppercase"),equal(o[1].innerHTML,"HELLO2","table--单元格2--up"),equal(o[2].innerHTML,"HELLO3","table--单元格3--up"),e.execCommand("tolowercase"),equal(o[1].innerHTML,"hello2","table--单元格2--low"),equal(o[2].innerHTML,"hello3","table--单元格3--low"),t.setStart(o[0],0).setEnd(o[3],1).select(),e.execCommand("touppercase"),equal(o[0].innerHTML,"HELLO1","table--单元格1--up"),equal(o[1].innerHTML,"HELLO2","table--单元格2--up"),equal(o[2].innerHTML,"HELLO3","table--单元格3--up"),equal(o[3].innerHTML,"HELLO4","table--单元格4--up"),e.execCommand("tolowercase"),equal(o[0].innerHTML,"hello1","table--单元格1--low"),equal(o[1].innerHTML,"hello2","table--单元格2--low"),equal(o[2].innerHTML,"hello3","table--单元格3--low"),equal(o[3].innerHTML,"hello4","table--单元格4--low"),start()},50)}),test("标签h1",function(){var e=te.obj[0],t=te.obj[1],l=e.body;e.setContent("<h1>hello1</h1><h1>hello2</h1>"),t.setStart(l.firstChild.firstChild,2).setEnd(l.lastChild.firstChild,2).select(),e.execCommand("touppercase"),equal(e.getContent(),"<h1>heLLO1</h1><h1>HEllo2</h1>","h1--up"),e.execCommand("tolowercase"),equal(e.getContent(),"<h1>hello1</h1><h1>hello2</h1>","h1--low")}),test("h1&table",function(){var e=te.obj[0],t=te.obj[1],l=e.body,o="<h1>hello</h1><table><tbody><tr><td>hello1</td><td>hello2</td></tr><tr><td>hello3</td><td>hello4</td></tr></tbody></table>";e.setContent(o),stop(),setTimeout(function(){t.setStart(l.firstChild.firstChild,0).setEnd(l.lastChild.firstChild.lastChild.lastChild.firstChild,6).select();var o=l.lastChild.getElementsByTagName("td");e.execCommand("touppercase"),ok("h1"==l.firstChild.tagName||"H1"==l.firstChild.tagName,"h1标签"),equal(l.firstChild.innerHTML,"HELLO","h1--up"),equal(o[0].innerHTML,"HELLO1","table--单元格1--up"),equal(o[1].innerHTML,"HELLO2","table--单元格2--up"),equal(o[2].innerHTML,"HELLO3","table--单元格3--up"),equal(o[3].innerHTML,"HELLO4","table--单元格4--up"),e.execCommand("tolowercase"),ok("h1"==l.firstChild.tagName||"H1"==l.firstChild.tagName,"h1标签"),equal(l.firstChild.innerHTML,"hello","h1--low"),equal(o[0].innerHTML,"hello1","table--单元格1--low"),equal(o[1].innerHTML,"hello2","table--单元格2--low"),equal(o[2].innerHTML,"hello3","table--单元格3--low"),equal(o[3].innerHTML,"hello4","table--单元格4--low"),start()},50)}),test("三个组合",function(){var e=te.obj[0],t=te.obj[1],l=e.body,o="<p>hello</p><table><tbody><tr><td>hello1</td><td>hello2</td></tr><tr><td>hello3</td><td>hello4</td></tr></tbody></table><h1>hello</h1>";e.setContent(o);var a=l.firstChild.nextSibling.getElementsByTagName("td");t.setStart(l.firstChild.firstChild,2).setEnd(l.lastChild.firstChild,2).select(),e.execCommand("touppercase"),ok("p"==l.firstChild.tagName||"P"==l.firstChild.tagName,"p标签"),equal(l.firstChild.innerHTML,"heLLO","p--up"),equal(a[0].innerHTML,"HELLO1","table--单元格1--up"),equal(a[1].innerHTML,"HELLO2","table--单元格2--up"),equal(a[2].innerHTML,"HELLO3","table--单元格3--up"),equal(a[3].innerHTML,"HELLO4","table--单元格4--up"),ok("h1"==l.lastChild.tagName||"H1"==l.lastChild.tagName,"h1标签"),equal(l.lastChild.innerHTML,"HEllo","h1--up"),e.execCommand("tolowercase"),ok("p"==l.firstChild.tagName||"P"==l.firstChild.tagName,"p标签"),equal(l.firstChild.innerHTML,"hello","p--low"),equal(a[0].innerHTML,"hello1","table--单元格1--low"),equal(a[1].innerHTML,"hello2","table--单元格2--low"),equal(a[2].innerHTML,"hello3","table--单元格3--low"),equal(a[3].innerHTML,"hello4","table--单元格4--low"),ok("h1"==l.lastChild.tagName||"H1"==l.lastChild.tagName,"h1标签"),equal(l.lastChild.innerHTML,"hello","h1--low")});