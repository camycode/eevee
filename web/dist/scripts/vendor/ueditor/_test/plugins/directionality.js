module("plugins.directionality"),test("非块元素，不闭合",function(){var e=te.obj[0],t=e.document,r=te.obj[1],i=e.body;e.setContent("xxxx<b><i>gggsiekes</i></b>"),setTimeout(function(){r.selectNode(t.getElementsByTagName("strong")[0]).collapse(!0).select(),equal(e.queryCommandValue("directionality"),"ltr","ltr queryCommandValue"),e.execCommand("directionality","rtl"),equal(ua.getChildHTML(i),'<p dir="rtl">xxxx<strong><em>gggsiekes</em></strong></p>',"directionrtl"),equal(e.queryCommandValue("directionality"),"rtl","directionrtl queryCommandValue"),e.execCommand("directionality","ltr"),equal(ua.getChildHTML(i),'<p dir="ltr">xxxx<strong><em>gggsiekes</em></strong></p>',"directionltr"),equal(e.queryCommandValue("directionality"),"ltr","directionltr queryCommandValue"),start()},20),stop()}),test("块元素，不闭合",function(){var e=te.obj[0],t=e.document,r=te.obj[1],i=e.body;e.setContent("<h1>gggsiekes</h1>"),setTimeout(function(){r.selectNode(t.getElementsByTagName("h1")[0]).select(),e.execCommand("directionality","ltr"),equal(ua.getChildHTML(i),'<h1 dir="ltr">gggsiekes</h1>',"directionltr"),equal(e.queryCommandValue("directionality"),"ltr","directionltr queryCommandValue"),e.execCommand("directionality","rtl"),equal(ua.getChildHTML(i),'<h1 dir="rtl">gggsiekes</h1>',"directionrtl"),equal(e.queryCommandValue("directionality"),"rtl","directionrtl queryCommandValue"),start()},20),stop()}),test("非块元素，闭合",function(){var e=te.obj[0],t=e.document,r=te.obj[1],i=e.body;e.setContent("<strong><em>gggsiekes</em></strong>"),setTimeout(function(){r.selectNode(t.getElementsByTagName("strong")[0].firstChild).collapse(!0).select(),e.execCommand("directionality","rtl"),equal(ua.getChildHTML(i),'<p dir="rtl"><strong><em>gggsiekes</em></strong></p>',"directionrtl"),equal(e.queryCommandValue("directionality"),"rtl","directionrtl queryCommandValue"),e.execCommand("directionality","ltr"),equal(ua.getChildHTML(i),'<p dir="ltr"><strong><em>gggsiekes</em></strong></p>',"directionltr"),equal(e.queryCommandValue("directionality"),"ltr","directionltr queryCommandValue"),e.setContent("<strong><em>gggsiekes</em></strong>"),r.selectNode(t.getElementsByTagName("strong")[0]).collapse(!0).select(),e.execCommand("directionality","rtl"),equal(ua.getChildHTML(i),'<p dir="rtl"><strong><em>gggsiekes</em></strong></p>',"directionrtl"),equal(e.queryCommandValue("directionality"),"rtl","查询文字输入方向为从右向左"),e.execCommand("directionality","ltr"),equal(ua.getChildHTML(i),'<p dir="ltr"><strong><em>gggsiekes</em></strong></p>',"从左向右"),equal(e.queryCommandValue("directionality"),"ltr","查询文字输入方向为从左向右"),start()},20),stop()}),test("选区包含块和非块元素",function(){var e=te.obj[0],t=e.document,r=te.obj[1],i=e.body;e.setContent("<strong><em>gggsiekes</em></strong><p>xx</p>"),setTimeout(function(){r.setStart(t.getElementsByTagName("strong")[0].firstChild,0).setEnd(t.getElementsByTagName("p")[1].firstChild,2).select(),e.execCommand("directionality","rtl"),equal(ua.getChildHTML(i),'<p dir="rtl"><strong><em>gggsiekes</em></strong></p><p dir="rtl">xx</p>',"directionrtl"),equal(e.queryCommandValue("directionality"),"rtl","directionrtl queryCommandValue"),e.execCommand("directionality","ltr"),equal(ua.getChildHTML(i),'<p dir="ltr"><strong><em>gggsiekes</em></strong></p><p dir="ltr">xx</p>',"directionltr"),equal(e.queryCommandValue("directionality"),"ltr","directionltr queryCommandValue"),start()},20),stop()}),test("选区在两个块元素之间",function(){var e=te.obj[0],t=e.document,r=te.obj[1],i=e.body;e.setContent('<p dir="rtl">sss</p><p>xx</p>'),setTimeout(function(){r.setStart(t.getElementsByTagName("p")[0].firstChild,0).setEnd(t.getElementsByTagName("p")[1].firstChild,2).select(),e.execCommand("directionality","rtl"),equal(ua.getChildHTML(i),'<p dir="rtl">sss</p><p dir="rtl">xx</p>',"directionrtl"),equal(e.queryCommandValue("directionality"),"rtl","directionrtl queryCommandValue"),e.execCommand("directionality","ltr"),equal(ua.getChildHTML(i),'<p dir="ltr">sss</p><p dir="ltr">xx</p>',"directionltr"),equal(e.queryCommandValue("directionality"),"ltr","directionltr queryCommandValue"),start()},20),stop()}),test("betweenblockelement",function(){var e=te.obj[0],t=e.document,r=te.obj[1],i=e.body;e.setContent("<p>xx</p>br"),setTimeout(function(){r.setStart(t.getElementsByTagName("p")[0].firstChild,0).setEnd(i.lastChild,1).select(),e.execCommand("directionality","rtl"),equal(ua.getChildHTML(i),'<p dir="rtl">xx</p><p dir="rtl">br</p>',"directionrtl"),equal(e.queryCommandValue("directionality"),"rtl","directionrtl queryCommandValue"),e.execCommand("directionality","ltr"),equal(ua.getChildHTML(i),'<p dir="ltr">xx</p><p dir="ltr">br</p>',"directionltr"),equal(e.queryCommandValue("directionality"),"ltr","directionltr queryCommandValue"),start()},20),stop()}),test("空格&nbsp;",function(){var e=te.obj[0],t=e.document,r=te.obj[1],i=e.body;e.setContent("<p>xx</p>&nbsp;"),setTimeout(function(){r.setStart(t.getElementsByTagName("p")[0].firstChild,0).setEnd(i.lastChild,1).select(),e.execCommand("directionality","rtl"),equal(ua.getChildHTML(i),'<p dir="rtl">xx</p><p dir="rtl">&nbsp;</p>',"directionrtl"),equal(e.queryCommandValue("directionality"),"rtl","directionrtl queryCommandValue"),e.execCommand("directionality","ltr"),equal(ua.getChildHTML(i),'<p dir="ltr">xx</p><p dir="ltr">&nbsp;</p>',"directionltr"),equal(e.queryCommandValue("directionality"),"ltr","directionltr queryCommandValue"),start()},20),stop()}),test("body",function(){var e=te.obj[0],t=te.obj[1];e.setContent("<p>xx</p>"),t.setStart(e.body,0).collapse(1).select(),e.execCommand("directionality","rtl"),ua.browser.ie?equal(ua.getChildHTML(e.body),'<p dir="rtl">xx</p>',"directionrtl"):equal(ua.getChildHTML(e.body),'<p dir="rtl"></p><p>xx</p>',"directionrtl")});