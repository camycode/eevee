module("plugins.dragdrop"),test("trace 3385：拖拽图像不会把p切开",function(){var e=te.obj[0],i=te.obj[1],t=e.body;stop(),t.innerHTML='<p>hel</p><img src="http://img.baidu.com/hi/jx2/j_0001.gif" width="50" height="51" _src="http://img.baidu.com/hi/jx2/j_0001.gif" style="float: right;"><p>lo<br></p>',i.selectNode(t.childNodes[1]).select(),equal(t.childNodes.length,3,"img在两个p之间"),equal(t.firstChild.tagName.toLowerCase(),"p","img在两个p之间"),equal(t.childNodes[1].tagName.toLowerCase(),"img","img在两个p之间"),equal(t.childNodes[2].tagName.toLowerCase(),"p","img在两个p之间"),ua.dragend(t),setTimeout(function(){equal(t.childNodes.length,1,"img在p里面"),equal(t.firstChild.tagName.toLowerCase(),"p","img在p里面"),equal(t.firstChild.childNodes[1].tagName.toLowerCase(),"img","img在p里面"),t.innerHTML='<p>asds</p><img src="http://img.baidu.com/hi/jx2/j_0001.gif" _src="http://img.baidu.com/hi/jx2/j_0001.gif" width="18" height="20" border="0" hspace="0" vspace="0" title="" style="line-height: 16px; width: 18px; height: 20px; float: right;"><span style="line-height: 16px;"></span><p>ad<br></p>',i.selectNode(t.childNodes[1]).select(),ua.dragend(t),setTimeout(function(){equal(t.childNodes.length,1,"拖拽图像不会把p切开,删除空span:img在p里面"),equal(t.firstChild.tagName.toLowerCase(),"p","img在p里面"),equal(t.firstChild.childNodes[1].tagName.toLowerCase(),"img","img在p里面"),start()},300)},100)});