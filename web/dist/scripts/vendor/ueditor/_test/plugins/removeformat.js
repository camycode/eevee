module("plugins.removeformat"),test("trace 860:对包含超链接的段落清除样式",function(){var e=te.obj[0],t=te.obj[1];e.setContent('<p><span style="color:red">hello</span><a href="http://www.baidu.com/" style="font-size: 16pt;">baidu</a></p>'),t.setStart(e.body.firstChild.firstChild.nextSibling.firstChild,2).collapse(!0).select(),e.execCommand("removeformat"),equal(e.getContent(),'<p>hello<a href="http://www.baidu.com/">baidu</a></p>',"对包含超链接的段落去除样式")}),test("trace 800:清除超链接的颜色",function(){var e=te.obj[0],t=te.obj[1];e.setContent('<a href="http://www.baidu.com/">baidu</a>'),t.selectNode(e.body.firstChild).select(),e.execCommand("forecolor","rgb(255,0,0)");var o='<a href="http://www.baidu.com/" _href="http://www.baidu.com/" style="color: rgb(255, 0, 0); text-decoration: underline;"><span style="color: rgb(255, 0, 0);">baidu</span></a>';ua.checkHTMLSameStyle(o,e.document,e.body.firstChild,"查看加了颜色后超链接的样式"),e.execCommand("removeformat");ua.browser.ie&&8==ua.browser.ie?'class=""':"";o='<a href="http://www.baidu.com/" _href="http://www.baidu.com/">baidu</a>',ua.browser.ie||ua.checkHTMLSameStyle(o,e.document,e.body.firstChild,"查看清除样式后超链接的样式")}),test("清除颜色的区域有多个inline元素嵌套",function(){var e=te.obj[0],t=te.obj[1],o=e.body;e.setContent("<p><em><strong>hello1</strong></em></p><p><strong><em>hello2</em></strong></p>");var s=o.getElementsByTagName("strong");t.setStart(s[0].firstChild,2).setEnd(s[1].firstChild.firstChild,3).select(),e.execCommand("removeformat"),equal(ua.getChildHTML(o),"<p><em><strong>he</strong></em>llo1</p><p>hel<strong><em>lo2</em></strong></p>")}),test("指定删除某一个style",function(){var e=te.obj[0],t=te.obj[1],o=e.body;e.setContent('<p><span style="color:red;font-size: 18px"><em><strong>hello1</strong></em></span></p><p><strong><span style="color:red;font-size: 18px">hello2</span></strong></p>');var s=o.getElementsByTagName("strong");t.setStart(s[0].firstChild,2).setEnd(s[1].firstChild.firstChild,3).select(),e.execCommand("removeformat","span","color");var r='<p><span style="color:red;font-size: 18px"><em><strong>he</strong></em></span><span style="font-size: 18px"><em><strong>llo1</strong></em></span></p><p><strong><span style="font-size: 18px">hel</span></strong><strong><span style="color:red;font-size: 18px">lo2</span></strong></p>';ua.checkHTMLSameStyle(r,e.document,o,"检查去除特定标签的样式的结果")}),test("指定删除的元素删除属性后是空元素",function(){var e=te.obj[0],t=te.obj[1],o=e.body;e.setContent('<p><span style="color:blue;"></span>hello2<span style="color:red;font-size: 12px"></span></p>'),t.setStart(o.firstChild,0).collapse(1).select(),e.execCommand("removeformat","span","color"),ua.checkHTMLSameStyle('hello2<span style="font-size: 12px"></span>',e.document,o.firstChild,"清除span corlor")}),test("闭合方式清除样式",function(){var e=te.obj[0],t=te.obj[1],o=e.body;e.setContent("<p><span><em><strong>hello1</strong></em></span></p><p><strong><em>hello2</em></strong></p>"),t.setStart(o.firstChild.firstChild,0).collapse(1).select(),e.execCommand("removeformat"),equal(ua.getChildHTML(o),"<p>hello1</p><p><strong><em>hello2</em></strong></p>")});