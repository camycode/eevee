module("plugins.paragraph"),test("不闭合h1和p之间的转换",function(){var e=te.obj[0],t=te.obj[1],a=e.body;e.setContent("<p>hello</p>"),setTimeout(function(){t.selectNode(a.firstChild.firstChild).select(),e.execCommand("paragraph","h1"),equal(ua.getChildHTML(a),"<h1>hello</h1>"),equal(e.queryCommandValue("paragraph"),"h1","当前的blcok元素为h1"),t.selectNode(a.firstChild.firstChild).select(),e.execCommand("paragraph","p"),equal(ua.getChildHTML(a),"<p>hello</p>"),e.setContent("<p>hello</p><h2>hello2</h2>"),setTimeout(function(){t.setStart(a.firstChild.firstChild,2).setEnd(a.lastChild.firstChild,1).select(),e.execCommand("paragraph","h3"),equal(ua.getChildHTML(a),"<h3>hello</h3><h3>hello2</h3>"),equal(e.queryCommandValue("paragraph"),"h3","当前的blcok元素为h3"),start()},50)},50),stop()}),test("闭合h1和p之间的转换",function(){var e=te.obj[0],t=te.obj[1],a=e.body;e.setContent("<p>hello</p><p>hello2</p>"),setTimeout(function(){t.setStart(a.firstChild.firstChild,1).collapse(1).select(),e.execCommand("paragraph","h1"),equal(ua.getChildHTML(a),"<h1>hello</h1><p>hello2</p>"),t.setStart(a.firstChild.firstChild,1).collapse(1).select(),e.execCommand("paragraph","p"),equal(ua.getChildHTML(a),"<p>hello</p><p>hello2</p>"),equal(e.queryCommandValue("paragraph"),"p","当前的blcok元素为p"),start()},50),stop()}),test("传入段落的样式",function(){var e=te.obj[0],t=te.obj[1],a=e.body;e.setContent("<p>hello</p><p>hello2</p>"),setTimeout(function(){t.setStart(a.firstChild.firstChild,1).collapse(1).select(),e.execCommand("paragraph","p",{style:"text-indent:2em"}),equal(a.firstChild.style.textIndent,"2em","改变了第一个孩子的缩进量"),equal(a.firstChild.tagName.toLowerCase(),"p","tagName仍然是p"),e.execCommand("paragraph","h4",{style:"text-indent:3em"}),equal(a.firstChild.style.textIndent,"3em","改变了第一个孩子的缩进量"),equal(a.firstChild.tagName.toLowerCase(),"h4","tagName是h4"),start()},50),stop()}),test("对表格设置样式",function(){var e=te.obj[0],t=te.obj[1],a=e.body;e.setContent("<table><tbody><tr><td><h1>hello1</h1></td></tr><tr><td></td></tr></tbody></table>"),setTimeout(function(){var l=a.getElementsByTagName("td");t.setStart(l[0].firstChild,0).collapse(1).select(),e.currentSelectedArr=[l[0]],e.execCommand("paragraph","p",{style:"text-indent:3em"}),equal(l[0].firstChild.style.textIndent,"3em","改变了第一个孩子的缩进量"),equal(l[0].firstChild.tagName.toLowerCase(),"h1","tagName仍然是h1"),t.setStart(l[1],0).collapse(1).select(),e.currentSelectedArr=[l[1]],e.execCommand("paragraph","p",{style:"text-indent:3em"}),ua.clearWhiteNode(l[1]),equal(l[1].firstChild.style.textIndent,"3em","改变了第一个孩子的缩进量"),equal(l[1].firstChild.tagName.toLowerCase(),"p","tagName是p"),start()},50),stop()});