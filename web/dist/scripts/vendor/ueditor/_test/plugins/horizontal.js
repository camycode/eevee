module("plugins.horizontal"),test("horizontal",function(){var t=te.obj[0],e=t.document,o=te.obj[1],a=t.body;t.setContent("<b><i>top</i></b><p>bottom</p>"),setTimeout(function(){o.setStart(e.getElementsByTagName("em")[0].firstChild,0).setEnd(a.lastChild.firstChild,5).select(),equal(t.queryCommandState("horizontal"),0,"边界不在table里"),t.execCommand("horizontal");var r=ua.browser.ie?"":"<br>";equal(ua.getChildHTML(a),"<p><strong><em></em></strong></p><hr><p>m"+r+"</p>","边界不在table里"),start()},50),stop()}),test("horizontal_br",function(){var t=document.body.appendChild(document.createElement("div"));$(t).css("width","500px").css("height","500px").css("border","1px solid #ccc");var e=new baidu.editor.Editor({initialContent:"<p>欢迎使用ueditor</p>",autoFloatEnabled:!1,enterTag:"br"});e.render(t),e.ready(function(){var o=new baidu.editor.dom.Range(e.document);e.setContent("<ol><li><p>top</p></li></ol>"),o.setStart(e.body.firstChild.firstChild,1).collapse(!0).select(),e.execCommand("horizontal"),o=e.selection.getRange();var a=ua.browser.ie&&ua.browser.ie<9?e.body.getElementsByTagName("li")[0]:e.body.getElementsByTagName("hr")[0].nextSibling,r=ua.browser.webkit||11==ua.browser.ie?1:ua.browser.ie&&ua.browser.ie<9?3:0;ua.browser.opera||ua.checkResult(o,a,a,r,r,!0,"check range"),ua.manualDeleteFillData(e.body),equal(ua.getChildHTML(e.body.firstChild),"<li><p>top</p><hr><br></li>","在列表中插入分隔线，在分隔线后面添加p用于定位"),setTimeout(function(){te.dom.push(t),start()},50)}),stop()}),test("horizontal-delkeydown",function(){var t=te.obj[0],e=t.document,o=te.obj[1],a=t.body;t.setContent("<b><i>top</i></b><p>bottom</p>"),setTimeout(function(){o.setStart(e.getElementsByTagName("em")[0].firstChild,0).setEnd(a.lastChild.firstChild,5).select(),t.execCommand("horizontal"),setTimeout(function(){o.setStart(t.body.lastChild,0).collapse(!0).select(),t.fireEvent("delkeydown",{});var e=ua.browser.ie?"":"<br>";equal(ua.getChildHTML(a),"<p><strong><em></em></strong></p><p>m"+e+"</p>","删除分隔符"),start()},50)},50),stop()}),test("在列表中插入分隔线，回车符为p",function(){var t=te.obj[0],e=te.obj[1],o=t.body;t.setContent("<ol><li><p>top</p></li></ol>"),e.setStart(o.firstChild.firstChild,1).collapse(!0).select(),t.execCommand("horizontal"),e=t.selection.getRange();var a=o.firstChild.firstChild.lastChild,r=ua.browser.ie&&ua.browser.ie>8&&ua.browser.ie<11||ua.browser.gecko?0:1;ua.browser.opera||ua.checkResult(e,a.firstChild,a.firstChild,r,r,!0,"check range"),ua.manualDeleteFillData(t.body),equal(ua.getChildHTML(o.firstChild),"<li><p>top</p><hr><p></p></li>","在列表中插入分隔线，在分隔线后面添加p用于定位")}),test("horizontal in table",function(){var t=te.obj[0],e=t.document,o=te.obj[1];t.setContent("<table><tr><td>1</td></tr><tr><td>2</td></tr></table>"),stop(),setTimeout(function(){o.setStart(e.getElementsByTagName("tr")[0].firstChild,0).setEnd(e.getElementsByTagName("tr")[1].firstChild,0).select(),equal(t.queryCommandState("horizontal"),-1,"边界在table里"),start()},50)}),test("horizontal&&collapsed",function(){var t=te.obj[0],e=te.obj[1],o=t.body;t.setContent("<b><i>top</i></b><p>bottom</p>"),e.setStart(o.lastChild.firstChild,0).collapse(!0).select(),equal(t.queryCommandState("horizontal"),0,"边界不在table里"),t.execCommand("horizontal");var a=ua.browser.ie?"":"<br>";equal(ua.getChildHTML(o),"<p><strong><em>top</em></strong></p><hr><p>bottom"+a+"</p>","边界不在table里")});