var htmlparser=UE.htmlparser=function(e,t){function a(e,t){if(f[e.tagName]){var a=p.createElement(f[e.tagName]);e.appendChild(a),a.appendChild(p.createText(t)),e=a}else e.appendChild(p.createText(t))}function r(e,t,a){var n;if(n=c[t]){for(var o,d=e;"root"!=d.type;){if(utils.isArray(n)?-1!=utils.indexOf(n,d.tagName):n==d.tagName){e=d,o=!0;break}d=d.parentNode}o||(e=r(e,utils.isArray(n)?n[0]:n))}var i=new p({parentNode:e,type:"element",tagName:t.toLowerCase(),children:dtd.$empty[t]?null:[]});if(a){for(var f,m={};f=l.exec(a);)m[f[1].toLowerCase()]=s[f[1].toLowerCase()]?f[2]||f[3]||f[4]:utils.unhtml(f[2]||f[3]||f[4]);i.attrs=m}return e.children.push(i),dtd.$empty[t]?e:i}function n(e,t){e.children.push(new p({type:"comment",data:t,parentNode:e}))}var o=/<(?:(?:\/([^>]+)>)|(?:!--([\S|\s]*?)-->)|(?:([^\s\/<>]+)\s*((?:(?:"[^"]*")|(?:'[^']*')|[^"'<>])*)\/?>))/g,l=/([\w\-:.]+)(?:(?:\s*=\s*(?:(?:"([^"]*)")|(?:'([^']*)')|([^\s>]+)))|(?=\s|$))/g,d={b:1,code:1,i:1,u:1,strike:1,s:1,tt:1,strong:1,q:1,samp:1,em:1,span:1,sub:1,img:1,sup:1,font:1,big:1,small:1,iframe:1,a:1,br:1,pre:1};e=e.replace(new RegExp(domUtils.fillChar,"g"),""),t||(e=e.replace(new RegExp("[\\r\\t\\n"+(t?"":" ")+"]*</?(\\w+)\\s*(?:[^>]*)>[\\r\\t\\n"+(t?"":" ")+"]*","g"),function(e,a){return a&&d[a.toLowerCase()]?e.replace(/(^[\n\r]+)|([\n\r]+$)/g,""):e.replace(new RegExp("^[\\r\\n"+(t?"":" ")+"]+"),"").replace(new RegExp("[\\r\\n"+(t?"":" ")+"]+$"),"")}));for(var i,s={href:1,src:1},p=UE.uNode,c={td:"tr",tr:["tbody","thead","tfoot"],tbody:"table",th:"tr",thead:"table",tfoot:"table",caption:"table",li:["ul","ol"],dt:"dl",dd:"dl",option:"select"},f={ol:"li",ul:"li"},m=0,u=0,g=new p({type:"root",children:[]}),h=g;i=o.exec(e);){m=i.index;try{if(m>u&&a(h,e.slice(u,m)),i[3])dtd.$cdata[h.tagName]?a(h,i[0]):h=r(h,i[3].toLowerCase(),i[4]);else if(i[1]){if("root"!=h.type)if(dtd.$cdata[h.tagName]&&!dtd.$cdata[i[1]])a(h,i[0]);else{for(var w=h;"element"==h.type&&h.tagName!=i[1].toLowerCase();)if(h=h.parentNode,"root"==h.type)throw h=w,"break";h=h.parentNode}}else i[2]&&n(h,i[2])}catch(y){}u=o.lastIndex}return u<e.length&&a(h,e.slice(u)),g};