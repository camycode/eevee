UE.plugin.register("anchor",function(){return{bindEvents:{ready:function(){utils.cssRule("anchor",".anchorclass{background: url('"+this.options.themePath+this.options.theme+"/images/anchor.gif') no-repeat scroll left center transparent;cursor: auto;display: inline-block;height: 16px;width: 15px;}",this.document)}},outputRule:function(t){utils.each(t.getNodesByTagName("img"),function(t){var e;(e=t.getAttr("anchorname"))&&(t.tagName="a",t.setAttr({anchorname:"",name:e,"class":""}))})},inputRule:function(t){utils.each(t.getNodesByTagName("a"),function(t){var e;(e=t.getAttr("name"))&&!t.getAttr("href")&&(t.tagName="img",t.setAttr({anchorname:t.getAttr("name"),"class":"anchorclass"}),t.setAttr("name"))})},commands:{anchor:{execCommand:function(t,e){var a=this.selection.getRange(),n=a.getClosedNode();if(n&&n.getAttribute("anchorname"))e?n.setAttribute("anchorname",e):(a.setStartBefore(n).setCursor(),domUtils.remove(n));else if(e){var r=this.document.createElement("img");a.collapse(!0),domUtils.setAttributes(r,{anchorname:e,"class":"anchorclass"}),a.insertNode(r).setStartAfter(r).setCursor(!1,!0)}}}}}});