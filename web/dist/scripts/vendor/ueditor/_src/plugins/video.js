UE.plugins.video=function(){function e(e,t,i,o,d,l,s){var r;switch(s){case"image":r="<img "+(o?'id="'+o+'"':"")+' width="'+t+'" height="'+i+'" _url="'+e+'" class="'+l.replace(/\bvideo-js\b/,"")+'" src="'+a.options.UEDITOR_HOME_URL+'themes/default/images/spacer.gif" style="background:url('+a.options.UEDITOR_HOME_URL+"themes/default/images/videologo.gif) no-repeat center center; border:1px solid gray;"+(d?"float:"+d+";":"")+'" />';break;case"embed":r='<embed type="application/x-shockwave-flash" class="'+l+'" pluginspage="http://www.macromedia.com/go/getflashplayer" src="'+utils.html(e)+'" width="'+t+'" height="'+i+'"'+(d?' style="float:'+d+'"':"")+' wmode="transparent" play="true" loop="false" menu="false" allowscriptaccess="never" allowfullscreen="true" >';break;case"video":var n=e.substr(e.lastIndexOf(".")+1);"ogv"==n&&(n="ogg"),r="<video"+(o?' id="'+o+'"':"")+' class="'+l+' video-js" '+(d?' style="float:'+d+'"':"")+' controls preload="none" width="'+t+'" height="'+i+'" src="'+e+'" data-setup="{}"><source src="'+e+'" type="video/'+n+'" /></video>'}return r}function t(t,a){utils.each(t.getNodesByTagName(a?"img":"embed video"),function(t){var i=t.getAttr("class");if(i&&-1!=i.indexOf("edui-faked-video")){var o=e(a?t.getAttr("_url"):t.getAttr("src"),t.getAttr("width"),t.getAttr("height"),null,t.getStyle("float")||"",i,a?"embed":"image");t.parentNode.replaceChild(UE.uNode.createElement(o),t)}if(i&&-1!=i.indexOf("edui-upload-video")){var o=e(a?t.getAttr("_url"):t.getAttr("src"),t.getAttr("width"),t.getAttr("height"),null,t.getStyle("float")||"",i,a?"video":"image");t.parentNode.replaceChild(UE.uNode.createElement(o),t)}})}var a=this;a.addOutputRule(function(e){t(e,!0)}),a.addInputRule(function(e){t(e)}),a.commands.insertvideo={execCommand:function(t,i,o){i=utils.isArray(i)?i:[i];for(var d,l,s=[],r="tmpVedio",n=0,u=i.length;u>n;n++)l=i[n],d="upload"==o?"edui-upload-video video-js vjs-default-skin":"edui-faked-video",s.push(e(l.url,l.width||420,l.height||280,r+n,null,d,"image"));a.execCommand("inserthtml",s.join(""),!0);for(var c=this.selection.getRange(),n=0,u=i.length;u>n;n++){var g=this.document.getElementById("tmpVedio"+n);domUtils.removeAttributes(g,"id"),c.selectNode(g).select(),a.execCommand("imagefloat",i[n].align)}},queryCommandState:function(){var e=a.selection.getRange().getClosedNode(),t=e&&("edui-faked-video"==e.className||-1!=e.className.indexOf("edui-upload-video"));return t?1:0}}};