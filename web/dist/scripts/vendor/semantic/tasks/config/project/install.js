var fs=require("fs"),path=require("path"),defaults=require("../defaults"),release=require("./release"),requireDotFile=require("require-dot-file"),when={changeRoot:function(e){return void 0!==e.useRoot&&e.useRoot!==!0},changePermissions:function(e){return e.changePermissions&&e.changePermissions===!0},hasConfig:function(){return requireDotFile("semantic.json")},allowOverwrite:function(e){return void 0===e.overwrite||"yes"==e.overwrite},notAuto:function(e){return"auto"!==e.install&&(void 0===e.overwrite||"yes"==e.overwrite)},custom:function(e){return"custom"===e.install&&(void 0===e.overwrite||"yes"==e.overwrite)},express:function(e){return"express"===e.install&&(void 0===e.overwrite||"yes"==e.overwrite)},customize:function(e){return e.customize===!0},primaryColor:function(e){return e.primaryColor},secondaryColor:function(e){return e.secondaryColor}},filter={removeTrailingSlash:function(e){return e.replace(/(\/$|\\$)+/gm,"")}};module.exports={isSetup:function(){return when.hasConfig()},getPackageManager:function(e){var n=function(e){var s=e.split(path.sep),a=s[s.length-1],t=path.join(e,path.sep,"..");return"bower_components"==a?{name:"Bower",root:t}:"node_modules"==a?{name:"NPM",root:t}:"composer"==a?{name:"Composer",root:t}:path.resolve(e)==path.resolve(t)?!1:n(t)};return e=e||__dirname+path.sep,n(e)},isSubModule:function(e){var n=0,s=function(e){var a=e.split(path.sep),t=a[a.length-2],o=path.join(e,path.sep,"..");return"bower_components"==t?n++:"node_modules"==t?n++:"composer"==t&&n++,path.resolve(e)==path.resolve(o)?n>1:s(o)};return e=e||__dirname+path.sep,s(e)},createJSON:function(e){var n={paths:{source:{},output:{}}};return e.components&&(n.components=e.components),e.rtl&&(n.rtl=e.rtl),e.permission&&(n.permission=e.permission),e.semanticRoot&&(n.base=path.normalize(e.semanticRoot)),n.version=release.version,e.dist&&(e.dist=path.normalize(e.dist),n.paths.output={packaged:path.normalize(e.dist+"/"),uncompressed:path.normalize(e.dist+"/components/"),compressed:path.normalize(e.dist+"/components/"),themes:path.normalize(e.dist+"/themes/")}),e.site&&(n.paths.source.site=path.normalize(e.site+"/")),e.packaged&&(n.paths.output.packaged=path.normalize(e.packaged+"/")),e.compressed&&(n.paths.output.compressed=path.normalize(e.compressed+"/")),e.uncompressed&&(n.paths.output.uncompressed=path.normalize(e.uncompressed+"/")),n},setupFiles:["./src/theme.config.example","./semantic.json.example","./src/_site"],regExp:{siteVariable:/@siteFolder .*\'(.*)/gm},source:{config:"./semantic.json.example",definitions:"./src/definitions",gulpFile:"./gulpfile.js",lessImport:"./src/semantic.less",site:"./src/_site",tasks:"./tasks",themeConfig:"./src/theme.config.example",themeImport:"./src/theme.less",themes:"./src/themes",defaultTheme:"./src/themes/default",userGulpFile:"./tasks/config/npm/gulpfile.js"},files:{config:"semantic.json",lessImport:"src/semantic.less",site:"src/site",themeConfig:"src/theme.config",themeImport:"src/theme.less"},folders:{config:"./",definitions:"src/definitions/",lessImport:"src/",modules:"node_modules/",site:"src/site/",tasks:"tasks/",themeConfig:"src/",themeImport:"src/",themes:"src/themes/",defaultTheme:"default/"},questions:{root:[{type:"list",name:"useRoot",message:"    \n    {packageMessage} \n    \n    Is this your project folder?\n    [92m{root}[0m \n    \n \n",choices:[{name:"Yes",value:!0},{name:"No, let me specify",value:!1}]},{type:"input",name:"customRoot",message:"Please enter the absolute path to your project root","default":"/my/project/path",when:when.changeRoot},{type:"input",name:"semanticRoot",message:"Where should we put Semantic UI inside your project?","default":"semantic/"}],setup:[{type:"list",name:"overwrite",message:"It looks like you have a semantic.json file already.",when:when.hasConfig,choices:[{name:"Yes, extend my current settings.",value:"yes"},{name:"Skip install",value:"no"}]},{type:"list",name:"install",message:"Set-up Semantic UI",when:when.allowOverwrite,choices:[{name:"Automatic (Use defaults locations and all components)",value:"auto"},{name:"Express (Set components and output folder)",value:"express"},{name:"Custom (Customize all src/dist values)",value:"custom"}]},{type:"checkbox",name:"components",message:"What components should we include in the package?",choices:[{name:"reset",checked:!0},{name:"site",checked:!0},{name:"button",checked:!0},{name:"container",checked:!0},{name:"divider",checked:!0},{name:"flag",checked:!0},{name:"header",checked:!0},{name:"icon",checked:!0},{name:"image",checked:!0},{name:"input",checked:!0},{name:"label",checked:!0},{name:"list",checked:!0},{name:"loader",checked:!0},{name:"rail",checked:!0},{name:"reveal",checked:!0},{name:"segment",checked:!0},{name:"step",checked:!0},{name:"breadcrumb",checked:!0},{name:"form",checked:!0},{name:"grid",checked:!0},{name:"menu",checked:!0},{name:"message",checked:!0},{name:"table",checked:!0},{name:"ad",checked:!0},{name:"card",checked:!0},{name:"comment",checked:!0},{name:"feed",checked:!0},{name:"item",checked:!0},{name:"statistic",checked:!0},{name:"accordion",checked:!0},{name:"checkbox",checked:!0},{name:"dimmer",checked:!0},{name:"dropdown",checked:!0},{name:"embed",checked:!0},{name:"modal",checked:!0},{name:"nag",checked:!0},{name:"popup",checked:!0},{name:"progress",checked:!0},{name:"rating",checked:!0},{name:"search",checked:!0},{name:"shape",checked:!0},{name:"sidebar",checked:!0},{name:"sticky",checked:!0},{name:"tab",checked:!0},{name:"transition",checked:!0},{name:"api",checked:!0},{name:"form",checked:!0},{name:"state",checked:!0},{name:"visibility",checked:!0}],when:when.notAuto},{type:"list",name:"changePermisions",when:when.notAuto,message:"Should we set permissions on outputted files?",choices:[{name:"No",value:!1},{name:"Yes",value:!0}]},{type:"input",name:"permission",message:"What octal file permission should outputted files receive?","default":defaults.permission,when:when.changePermissions},{type:"list",name:"rtl",message:"Do you use a RTL (Right-To-Left) language?",when:when.notAuto,choices:[{name:"No",value:!1},{name:"Yes",value:!0},{name:"Build Both",value:"both"}]},{type:"input",name:"dist",message:"Where should we output Semantic UI?","default":defaults.paths.output.packaged,filter:filter.removeTrailingSlash,when:when.express},{type:"input",name:"site",message:"Where should we put your site folder?","default":defaults.paths.source.site,filter:filter.removeTrailingSlash,when:when.custom},{type:"input",name:"packaged",message:"Where should we output a packaged version?","default":defaults.paths.output.packaged,filter:filter.removeTrailingSlash,when:when.custom},{type:"input",name:"compressed",message:"Where should we output compressed components?","default":defaults.paths.output.compressed,filter:filter.removeTrailingSlash,when:when.custom},{type:"input",name:"uncompressed",message:"Where should we output uncompressed components?","default":defaults.paths.output.uncompressed,filter:filter.removeTrailingSlash,when:when.custom}],cleanup:[{type:"list",name:"cleanup",message:"Should we remove set-up files?",choices:[{name:"Yes (re-install will require redownloading semantic).",value:"yes"},{name:"No Thanks",value:"no"}]},{type:"list",name:"build",message:"Do you want to build Semantic now?",choices:[{name:"Yes",value:"yes"},{name:"No",value:"no"}]}],site:[{type:"list",name:"customize",message:"You have not yet customized your site, can we help you do that?",choices:[{name:"Yes, ask me a few questions",value:!0},{name:"No I'll do it myself",value:!1}]},{type:"list",name:"headerFont",message:"Select your header font",choices:[{name:"Helvetica Neue, Arial, sans-serif",value:"Helvetica Neue, Arial, sans-serif;"},{name:"Lato (Google Fonts)",value:"Lato"},{name:"Open Sans (Google Fonts)",value:"Open Sans"},{name:"Source Sans Pro (Google Fonts)",value:"Source Sans Pro"},{name:"Droid (Google Fonts)",value:"Droid"},{name:"I'll choose on my own",value:!1}],when:when.customize},{type:"list",name:"pageFont",message:"Select your page font",choices:[{name:"Helvetica Neue, Arial, sans-serif",value:"Helvetica Neue, Arial, sans-serif;"},{name:"Lato (Import from Google Fonts)",value:"Lato"},{name:"Open Sans (Import from Google Fonts)",value:"Open Sans"},{name:"Source Sans Pro (Import from Google Fonts)",value:"Source Sans Pro"},{name:"Droid (Google Fonts)",value:"Droid"},{name:"I'll choose on my own",value:!1}],when:when.customize},{type:"list",name:"fontSize",message:"Select your base font size","default":"14px",choices:[{name:"12px"},{name:"13px"},{name:"14px (Recommended)",value:"14px"},{name:"15px"},{name:"16px"},{name:"I'll choose on my own",value:!1}],when:when.customize},{type:"list",name:"primaryColor",message:"Select the closest name for your primary brand color","default":"14px",choices:[{name:"Blue"},{name:"Green"},{name:"Orange"},{name:"Pink"},{name:"Purple"},{name:"Red"},{name:"Teal"},{name:"Yellow"},{name:"Black"},{name:"I'll choose on my own",value:!1}],when:when.customize},{type:"input",name:"PrimaryHex",message:"Enter a hexcode for your primary brand color",when:when.primaryColor},{type:"list",name:"secondaryColor",message:"Select the closest name for your secondary brand color","default":"14px",choices:[{name:"Blue"},{name:"Green"},{name:"Orange"},{name:"Pink"},{name:"Purple"},{name:"Red"},{name:"Teal"},{name:"Yellow"},{name:"Black"},{name:"I'll choose on my own",value:!1}],when:when.customize},{type:"input",name:"secondaryHex",message:"Enter a hexcode for your secondary brand color",when:when.secondaryColor}]},settings:{rename:{json:{extname:".json"}},wrench:{overwrite:{forceDelete:!0,excludeHiddenUnix:!0,preserveFiles:!1},merge:{forceDelete:!1,excludeHiddenUnix:!0,preserveFiles:!0}}}};