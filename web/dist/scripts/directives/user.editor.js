define(["app","typing","css!../css/directives/user.editor"],function(e){e.directive("user.editor",function(){return{restrict:"A",replace:!0,templateUrl:"views/directives/user.editor.html",controller:["$scope","role","user","typing",function(e,s,r,t){e.title="编辑用户",e.roles=[];var i={username:"",password:"",email:"",role:"guest"};e.user=$.extend({},i),s.getRoles().success(function(s){200==s.code?e.roles=s.data:t.warning(s.message)}).error(function(){t.error("获取角色组网络错误")});var n=function(){$("#directive-user-editor").addClass("animated slideOutRight")},o=function(){$("#directive-user-editor").hide().removeClass("animated slideOutRight").addClass("animated slideInRight").show()};e.$on("app.user.editor.show",function(e,s){o()}),e.submitUser=function(){r.postUser(e.user).success(function(s){200==s.code?(n(),t.success("用户添加成功"),e.$emit("app.user.posted",s.data),e.user=$.extend({},i)):t.warning(s.message)}).error(function(){t.error("网络错误")})},e.closeUserEditor=function(){n()}}]}})});