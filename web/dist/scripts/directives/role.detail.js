define(["app","role","typing","css!../css/directives/role.detail"],function(e){e.directive("role.detail",function(){return{restrict:"A",replace:!0,templateUrl:"views/directives/role.detail.html",controller:["$scope","role","typing",function(e,i,s){e.role={},e.permissions={},e.loadPermissionsDone=!1,e.hasPermissions=!0;var o=function(){$("#directive-role-detail").addClass("animated slideOutRight")};e.$on("app.role.detail.show",function(o,r){$("#directive-role-detail").hide().removeClass("animated slideOutRight").addClass("animated slideInRight").show(),i.getRole(r).success(function(i){200==i.code?e.role=i.data:s.warning(i.message)}).error(function(){s.error("网络错误")}),e.loadPermissionsDone=!1,e.hasPermissions=!0,i.getRolePermissions(r).success(function(i){if(e.loadPermissionsDone=!0,200==i.code){e.permissions=i.data;for(var o in i.data)return;e.hasPermissions=!1}else s.warning(i.message)}).error(function(){s.error("网络错误")})}),e.openRoleEditor=function(i){o(),e.$emit("app.role.editor.show",i)},e.closeUserDetailView=function(){o()}}]}})});