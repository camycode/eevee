define(["app"],function(e){e.factory("url",["$location",function(e){var n={params_encode:function(e){return urlencode(base64_encode(json_encode(e)))},parseParams:function(e){var n="",r=1;for(item in e)n=r>1?n+"&":n,n=n+item+"="+e[item],r+=1;return n},params_decode:function(e){return json_decode(base64_decode(urldecode(e)))},last:function(e){e="undefined"==typeof e?-1:e,history.go(e)},replace:function(r,o){e.url(r+"?"+n.parseParams(o)).replace()},redirect:function(e,r){r=r||{},location.href="#"+e+"?"+n.parseParams(r)},getParams:function(){}};return n}])});