define(["role","user","typing","css!../../css/app.user"],function(){return["$scope","typing","user",function(e,t,s){var r="updated_at",n="desc",o=10,u=0,a={username:null,email:null,role:null,status:null,updated_at:null};e.offsetStart=u,e.offsetEnd=u+o,e.users=[],e.userTotal=null;var i=function(r){s.getUsers(r).success(function(s){200==s.code?e.users=s.data:t.warning(s.message)}).error(function(){t.error("网络错误")})};s.setUserEditor(e),s.setUserDetail(e),s.getUsers({count:!0}).success(function(t){e.userTotal=t.data}).error(function(){}),i({order:r+":"+n,limit:o}),e.sort=$.extend({},a),e.sortBy=function(t){r==t&&(n="asc"==n?"desc":"asc"),e.sort=$.extend({},a),r=t,e.sort[t]="asc"==n?"sort ascending":"sort descending",i({order:t+":"+n,limit:o})},e.nextPage=function(){var t=u+o;t<e.userTotal&&(u=t,e.offsetStart=u,e.offsetEnd=e.offsetStart+o,i({order:r+":"+n,limit:o,offset:u}))},e.lastPage=function(){var t=u-o;t>=0&&(u=t,e.offsetStart=u,e.offsetEnd=e.offsetStart+o,i({order:r+":"+n,limit:o,offset:u}))},e.openUserEditor=function(){e.$emit("app.user.editor.show")},e.openUserDetailView=function(t){e.$emit("app.user.detail.show",t)},e.$on("app.user.posted",function(t,s){e.users.unshift(s)})}]});