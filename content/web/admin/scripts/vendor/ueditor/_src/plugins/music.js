UE.plugin.register("music",function(){function e(e,a,i,l,n,r){return r?'<embed type="application/x-shockwave-flash" class="edui-faked-music" pluginspage="http://www.macromedia.com/go/getflashplayer" src="'+e+'" width="'+a+'" height="'+i+'" '+(l&&!n?'align="'+l+'"':"")+(n?'style="float:'+n+'"':"")+' wmode="transparent" play="true" loop="false" menu="false" allowscriptaccess="never" allowfullscreen="true" >':"<img "+(l&&!n?'align="'+l+'"':"")+(n?'style="float:'+n+'"':"")+' width="'+a+'" height="'+i+'" _url="'+e+'" class="edui-faked-music" src="'+t.options.langPath+t.options.lang+'/images/music.png" />'}var t=this;return{outputRule:function(t){utils.each(t.getNodesByTagName("img"),function(t){var a;if("edui-faked-music"==t.getAttr("class")){var i=t.getStyle("float"),l=t.getAttr("align");a=e(t.getAttr("_url"),t.getAttr("width"),t.getAttr("height"),l,i,!0);var n=UE.uNode.createElement(a);t.parentNode.replaceChild(n,t)}})},inputRule:function(t){utils.each(t.getNodesByTagName("embed"),function(t){if("edui-faked-music"==t.getAttr("class")){var a=t.getStyle("float"),i=t.getAttr("align");html=e(t.getAttr("src"),t.getAttr("width"),t.getAttr("height"),i,a,!1);var l=UE.uNode.createElement(html);t.parentNode.replaceChild(l,t)}})},commands:{music:{execCommand:function(t,a){var i=this,l=e(a.url,a.width||400,a.height||95,"none",!1);i.execCommand("inserthtml",l)},queryCommandState:function(){var e=this,t=e.selection.getRange().getClosedNode(),a=t&&"edui-faked-music"==t.className;return a?1:0}}}}});