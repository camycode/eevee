!function(){UE.Editor.prototype.loadServerConfig=function(){function showErrorMsg(o){console&&console.error(o)}var me=this;setTimeout(function(){try{me.options.imageUrl&&me.setOpt("serverUrl",me.options.imageUrl.replace(/^(.*[\/]).+([\.].+)$/,"$1controller$2"));var configUrl=me.getActionUrl("config"),isJsonp=utils.isCrossDomainUrl(configUrl);me._serverConfigLoaded=!1,configUrl&&UE.ajax.request(configUrl,{method:"GET",dataType:isJsonp?"jsonp":"",onsuccess:function(r){try{var config=isJsonp?r:eval("("+r.responseText+")");utils.extend(me.options,config),me.fireEvent("serverConfigLoaded"),me._serverConfigLoaded=!0}catch(e){showErrorMsg(me.getLang("loadconfigFormatError"))}},onerror:function(){showErrorMsg(me.getLang("loadconfigHttpError"))}})}catch(e){showErrorMsg(me.getLang("loadconfigError"))}})},UE.Editor.prototype.isServerConfigLoaded=function(){var o=this;return o._serverConfigLoaded||!1},UE.Editor.prototype.afterConfigReady=function(o){if(o&&utils.isFunction(o)){var r=this,e=function(){o.apply(r,arguments),r.removeListener("serverConfigLoaded",e)};r.isServerConfigLoaded()?o.call(r,"serverConfigLoaded"):r.addListener("serverConfigLoaded",e)}}}();