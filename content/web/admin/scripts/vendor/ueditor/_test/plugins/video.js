module("plugins.video"),test("插入优酷视频",function(){var e=te.obj[0],o=te.obj[1];e.setContent("<p>hello</p>"),o.setStart(e.body.firstChild,0).collapse(!0).select();var t={url:"http://player.youku.com/player.php/Type/Folder/Fid/19275705/Ob/1/sid/XNTU3Mjk4NzQ4/v.swf",width:"500",height:"400",align:"center"};e.execCommand("insertvideo",t),stop(),setTimeout(function(){var o=e.body.getElementsByTagName("img");equal(o.length,1,"插入img"),equal(o[0].width,"500"),equal(o[0].height,"400"),equal(o[0].src,e.options.UEDITOR_HOME_URL+"themes/default/images/spacer.gif"),ua.browser.gecko||ua.browser.ie>8?ok(o[0].style.background.indexOf('url("'+e.options.UEDITOR_HOME_URL+'themes/default/images/videologo.gif")')>-1,"占位符背景图是否正常"):ok(o[0].style.background.indexOf("url("+e.options.UEDITOR_HOME_URL+"themes/default/images/videologo.gif)")>-1,"占位符背景图是否正常");var t=e.getContent();ok(-1!=t.toLowerCase().indexOf("<embed"),"转换为embed标签"),start()},100)}),test("插入上传视频",function(){var e=te.obj[0],o=te.obj[1];e.setContent("<p>hello</p>"),o.setStart(e.body.firstChild,0).collapse(!0).select();var t={url:"http://video-js.zencoder.com/oceans-clip.mp4",width:"500",height:"400",align:"center"};e.execCommand("insertvideo",t,"upload"),stop(),setTimeout(function(){var o=e.body.getElementsByTagName("img");equal(o.length,1,"插入img"),equal(o[0].width,"500"),equal(o[0].height,"400"),ok(o[0].className&&-1!=o[0].className.indexOf("edui-upload-video"),"okey:有edui-upload-video的class标记"),equal(o[0].src,e.options.UEDITOR_HOME_URL+"themes/default/images/spacer.gif"),ua.browser.gecko||ua.browser.ie>8?ok(o[0].style.background.indexOf('url("'+e.options.UEDITOR_HOME_URL+'themes/default/images/videologo.gif")')>-1,"占位符背景图是否正常"):ok(o[0].style.background.indexOf("url("+e.options.UEDITOR_HOME_URL+"themes/default/images/videologo.gif)")>-1,"占位符背景图是否正常");var t=e.getContent();ok(-1!=t.toLowerCase().indexOf("<video"),"转换为video标签"),start()},100)});