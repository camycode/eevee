module("plugins.contextmenu"),test("基本的shortcutmenu",function(){var e=document.body.appendChild(document.createElement("div"));e.id="ue";var t=UE.getEditor("ue",{shortcutMenu:["fontfamily","fontsize","bold","italic","underline","forecolor","backcolor","insertorderedlist","insertunorderedlist"]});stop(),t.ready(function(){ua.contextmenu(t.body),setTimeout(function(){var e=document.getElementsByClassName("edui-shortcutmenu")[0];equal(!!e,!0,"右键检查菜单是否存在"),ok(""==e.style.display||"block"==e.style.display,"右键检查菜单是否显示"),ua.mousedown(t.body.firstChild),equal(e.style.display,"none","鼠标按下检查菜单是否隐藏"),UE.delEditor("ue"),te.dom.push(document.getElementById("ue")),te.dom.push(document.getElementById("edui_fixedlayer")),start()},100)})}),test("键盘操作,隐藏shortcutmenu",function(){var e=document.body.appendChild(document.createElement("div"));e.id="ue";var t=UE.getEditor("ue",{shortcutMenu:["fontfamily","fontsize","bold","italic","underline","forecolor","backcolor","insertorderedlist","insertunorderedlist"]});stop(),t.ready(function(){ua.contextmenu(t.body),setTimeout(function(){var e=document.getElementsByClassName("edui-shortcutmenu")[0];equal(!!e,!0,"右键检查菜单是否存在"),ok(""==e.style.display||"block"==e.style.display,"右键检查菜单是否显示"),ua.keydown(t.body.firstChild),equal(e.style.display,"none","键盘按下检查菜单是否隐藏"),UE.delEditor("ue"),te.dom.push(document.getElementById("ue")),te.dom.push(document.getElementById("edui_fixedlayer")),start()},100)})}),test("框选内容",function(){var e=document.body.appendChild(document.createElement("div"));e.id="ue";var t=UE.getEditor("ue",{shortcutMenu:["fontfamily","fontsize","bold","italic","underline","forecolor","backcolor","insertorderedlist","insertunorderedlist"]});stop(),t.ready(function(){t.setContent("<p>hello</p>");var e=new baidu.editor.dom.Range(t.document);e.setStart(t.body.firstChild.firstChild,0).setEnd(t.body.firstChild.firstChild,2).select();var o=t.selection.getRange().startContainer,n=t.selection.getRange().endContainer,d=t.selection.getRange().startOffset,i=t.selection.getRange().endOffset,u=t.selection.getRange().collapsed;ua.contextmenu(t.body),setTimeout(function(){var e=document.getElementsByClassName("edui-shortcutmenu")[0];equal(!!e,!0,"右键检查菜单是否存在"),ok(""==e.style.display||"block"==e.style.display,"右键检查菜单是否显示"),ua.checkResult(t.selection.getRange(),o,n,d,i,u,"检查range不变"),ua.keydown(t.body.firstChild),UE.delEditor("ue"),te.dom.push(document.getElementById("ue")),te.dom.push(document.getElementById("edui_fixedlayer")),start()},100)})});